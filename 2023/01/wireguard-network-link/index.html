<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>Wireguard 组网 - Kur4ge&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#cee1ff"><meta name="application-name" content="Kur4ge&#039;s Blog"><meta name="msapplication-TileImage" content="https://kur4ge.oss-accelerate.aliyuncs.com/img/icon-192x192.png"><meta name="msapplication-TileColor" content="#cee1ff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Kur4ge&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="192x192" href="https://kur4ge.oss-accelerate.aliyuncs.com/img/icon-192x192.png"><link rel="apple-touch-icon" sizes="256x256" href="https://kur4ge.oss-accelerate.aliyuncs.com/icon-256x256.png"><link rel="apple-touch-icon" sizes="384x384" href="https://kur4ge.oss-accelerate.aliyuncs.com/icon-384x384.png"><link rel="apple-touch-icon" sizes="512x512" href="https://kur4ge.oss-accelerate.aliyuncs.com/icon-512x512.png"><meta name="description" content="随着上一篇 WireGuard 简易上手，已经对 WireGuard 有了一定了解。接着我们可以通过 WireGuard 进行进阶的组网操作。"><meta property="og:type" content="blog"><meta property="og:title" content="Wireguard 组网"><meta property="og:url" content="https://blog.kur4ge.com/2023/01/wireguard-network-link/"><meta property="og:site_name" content="Kur4ge&#039;s Blog"><meta property="og:description" content="随着上一篇 WireGuard 简易上手，已经对 WireGuard 有了一定了解。接着我们可以通过 WireGuard 进行进阶的组网操作。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://kur4ge.oss-accelerate.aliyuncs.com/img/og_image.png"><meta property="article:published_time" content="2023-01-27T06:18:47.000Z"><meta property="article:modified_time" content="2023-01-27T06:18:47.000Z"><meta property="article:author" content="Kur4ge"><meta property="article:tag" content="WireGuard"><meta property="article:tag" content="Network"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://kur4ge.oss-accelerate.aliyuncs.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.kur4ge.com/2023/01/wireguard-network-link/"},"headline":"Wireguard 组网","image":["https://blog.kur4ge.com/img/og_image.png"],"datePublished":"2023-01-27T06:18:47.000Z","dateModified":"2023-01-27T06:18:47.000Z","author":{"@type":"Person","name":"Kur4ge"},"publisher":{"@type":"Organization","name":"Kur4ge's Blog","logo":{"@type":"ImageObject","url":"https://kur4ge.oss-accelerate.aliyuncs.com/img/logo.png?no-lazy"}},"description":"随着上一篇 WireGuard 简易上手，已经对 WireGuard 有了一定了解。接着我们可以通过 WireGuard 进行进阶的组网操作。"}</script><link rel="canonical" href="https://blog.kur4ge.com/2023/01/wireguard-network-link/"><link rel="alternate" href="/atom.xml" title="Kur4ge&#039;s Blog" type="application/atom+xml"><link rel="icon" href="https://kur4ge.oss-accelerate.aliyuncs.com/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="https://kur4ge.oss-accelerate.aliyuncs.com/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?53d4cc3fbcaf6e6e10265955449fabff";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-6HGV3NEPFY" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6HGV3NEPFY")</script><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script>!function(){function e(){if(!location.hash)return;Array.from(document.querySelectorAll(".tab-content")).forEach(e=>{e.classList.add("is-hidden")}),Array.from(document.querySelectorAll(".tabs li")).forEach(e=>{e.classList.remove("is-active")});const e=document.querySelector(location.hash);e&&e.classList.remove("is-hidden");const t=document.querySelector(`a[href="${location.hash}"]`);t&&t.parentElement.classList.add("is-active")}e(),window.addEventListener("hashchange",e,!1)}()</script><meta name="generator" content="Hexo 6.0.0"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://kur4ge.oss-accelerate.aliyuncs.com/img/logo.png?no-lazy" alt="Kur4ge&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2023-01-27T06:18:47.000Z" title="1/27/2023, 6:18:47 AM">2023-01-27</time>发表</span><span class="level-item"><time datetime="2023-01-27T06:18:47.000Z" title="1/27/2023, 6:18:47 AM">2023-01-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%B0%9D%E5%B0%9D%E9%B2%9C/">尝尝鲜</a></span><span class="level-item">4 分钟读完 (大约591个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Wireguard 组网</h1><div class="content"><p>随着上一篇 <a href="/2022/02/wireguard-tutorial/">WireGuard 简易上手</a>，已经对 WireGuard 有了一定了解。<br>接着我们可以通过 WireGuard 进行进阶的组网操作。</p><span id="more"></span><p>可以查看一下下面的网络图，简单来说我们可以通过WireGuard 使 NodeA，NodeB 互通，并且也能访问到 UbuntuC 中所在网段（单向）</p><div style="margin:0 0 20px"><div style="margin:0 auto"> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg viewBox="0.00 0.00 1020.81 194.85" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 190.8515)"><title></title><polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-190.8515 1016.8148,-190.8515 1016.8148,4 -4,4"/><g id="node1" class="node"><title>Master</title><polygon fill="none" stroke="#000000" points="461.4086,-67.0014 350.4063,-67.0014 350.4063,-8.1986 461.4086,-8.1986 461.4086,-67.0014"/><text text-anchor="middle" x="405.9074" y="-50.2" font-family="Times,serif" font-size="14.00" fill="#000000">Master</text><text text-anchor="middle" x="405.9074" y="-33.4" font-family="Times,serif" font-size="14.00" fill="#000000">192.168.234.128</text><text text-anchor="middle" x="405.9074" y="-16.6" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.0.1</text></g><g id="node2" class="node"><title>OpenwrtA</title><polygon fill="none" stroke="#000000" points="332.4086,-75.3003 229.4062,-75.3003 229.4062,.1003 332.4086,.1003 332.4086,-75.3003"/><text text-anchor="middle" x="280.9074" y="-58.6" font-family="Times,serif" font-size="14.00" fill="#000000">Openwrt A</text><text text-anchor="middle" x="280.9074" y="-41.8" font-family="Times,serif" font-size="14.00" fill="#000000">192.168.123.11</text><text text-anchor="middle" x="280.9074" y="-25" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.0.2</text><text text-anchor="middle" x="280.9074" y="-8.2" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.1.1</text></g><g id="node3" class="node"><title>OpenwrtB</title><polygon fill="none" stroke="#000000" points="582.4086,-75.3003 479.4062,-75.3003 479.4062,.1003 582.4086,.1003 582.4086,-75.3003"/><text text-anchor="middle" x="530.9074" y="-58.6" font-family="Times,serif" font-size="14.00" fill="#000000">Openwrt B</text><text text-anchor="middle" x="530.9074" y="-41.8" font-family="Times,serif" font-size="14.00" fill="#000000">192.168.123.12</text><text text-anchor="middle" x="530.9074" y="-25" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.0.3</text><text text-anchor="middle" x="530.9074" y="-8.2" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.1.1</text></g><g id="node4" class="node"><title>UbuntuC</title><polygon fill="none" stroke="#000000" points="732.9087,-67.0014 636.9061,-67.0014 636.9061,-8.1986 732.9087,-8.1986 732.9087,-67.0014"/><text text-anchor="middle" x="684.9074" y="-50.2" font-family="Times,serif" font-size="14.00" fill="#000000">Ubuntu C</text><text text-anchor="middle" x="684.9074" y="-33.4" font-family="Times,serif" font-size="14.00" fill="#000000">192.168.31.10</text><text text-anchor="middle" x="684.9074" y="-16.6" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.0.4</text></g><g id="node5" class="node"><title>NodeA</title><polygon fill="none" stroke="#000000" points="118.9089,-58.2019 36.9059,-58.2019 36.9059,-16.9981 118.9089,-16.9981 118.9089,-58.2019"/><text text-anchor="middle" x="77.9074" y="-41.8" font-family="Times,serif" font-size="14.00" fill="#000000">Node A</text><text text-anchor="middle" x="77.9074" y="-25" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.1.10</text></g><g id="node6" class="node"><title>NodeB</title><polygon fill="none" stroke="#000000" points="975.9089,-58.2019 893.9059,-58.2019 893.9059,-16.9981 975.9089,-16.9981 975.9089,-58.2019"/><text text-anchor="middle" x="934.9074" y="-41.8" font-family="Times,serif" font-size="14.00" fill="#000000">Node B</text><text text-anchor="middle" x="934.9074" y="-25" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.2.10</text></g><g id="node7" class="node"><title>VMnet0</title><polygon fill="none" stroke="#0000ff" points="317.0626,-128.1545 325.1104,-128.3152 333.0749,-128.5557 340.9237,-128.8753 348.625,-129.2731 356.1478,-129.7482 363.4625,-130.2991 370.5407,-130.9243 377.3554,-131.6222 383.8813,-132.3908 390.0949,-133.228 395.9746,-134.1315 401.5008,-135.0989 406.6561,-136.1275 411.425,-137.2145 415.7946,-138.3568 419.754,-139.5515 423.2948,-140.7951 426.4106,-142.0843 429.0976,-143.4155 431.354,-144.7852 433.1802,-146.1895 434.5787,-147.6246 435.5542,-149.0866 436.113,-150.5714 436.2634,-152.075 436.0151,-153.5933 435.3797,-155.122 434.3698,-156.6571 432.9995,-158.1943 431.2837,-159.7294 429.2383,-161.2582 426.88,-162.7765 424.2259,-164.2801 421.2936,-165.7649 418.1009,-167.2269 414.6655,-168.662 411.0055,-170.0663 407.1381,-171.4359 403.0808,-172.7672 398.8502,-174.0564 394.4626,-175.3 389.9333,-176.4946 385.2773,-177.637 380.5083,-178.7239 375.6396,-179.7525 370.6832,-180.7199 365.6504,-181.6235 360.5515,-182.4607 355.396,-183.2293 350.1922,-183.9272 344.9479,-184.5524 339.6699,-185.1033 334.3644,-185.5783 329.0366,-185.9762 323.6916,-186.2958 318.3336,-186.5362 312.9666,-186.6969 307.5944,-186.7774 302.2204,-186.7774 296.8482,-186.6969 291.4813,-186.5362 286.1233,-186.2958 280.7782,-185.9762 275.4505,-185.5783 270.1449,-185.1033 264.8669,-184.5524 259.6226,-183.9272 254.4189,-183.2293 249.2633,-182.4607 244.1644,-181.6235 239.1317,-180.7199 234.1753,-179.7525 229.3065,-178.7239 224.5376,-177.637 219.8815,-176.4946 215.3523,-175.3 210.9646,-174.0564 206.734,-172.7672 202.6767,-171.4359 198.8094,-170.0663 195.1493,-168.662 191.714,-167.2269 188.5212,-165.7649 185.5889,-164.2801 182.9349,-162.7765 180.5765,-161.2582 178.5312,-159.7294 176.8154,-158.1943 175.445,-156.6571 174.4351,-155.122 173.7997,-153.5933 173.5515,-152.075 173.7018,-150.5714 174.2606,-149.0866 175.2361,-147.6246 176.6347,-146.1895 178.4609,-144.7852 180.7173,-143.4155 183.4042,-142.0843 186.5201,-140.7951 190.0608,-139.5515 194.0202,-138.3568 198.3898,-137.2145 203.1588,-136.1275 208.314,-135.0989 213.8402,-134.1315 219.7199,-133.228 225.9335,-132.3908 232.4595,-131.6222 239.2741,-130.9243 246.3523,-130.2991 253.667,-129.7482 261.1899,-129.2731 268.8911,-128.8753 276.7399,-128.5557 284.7044,-128.3152 292.7522,-128.1545 300.8501,-128.0741 308.9647,-128.0741 317.0626,-128.1545"/><text text-anchor="middle" x="304.9074" y="-161.6257" font-family="Times,serif" font-size="14.00" fill="#0000ff">Vmware NAT(INTERNET)</text><text text-anchor="middle" x="304.9074" y="-144.8257" font-family="Times,serif" font-size="14.00" fill="#0000ff">192.168.234.0/24</text></g><g id="edge1" class="edge"><title>VMnet0&#45;&gt;Master</title><path fill="none" stroke="#0000ff" d="M329.3567,-128.4193C342.9249,-112.3221 359.948,-92.1259 374.494,-74.8687"/><polygon fill="#0000ff" stroke="#0000ff" points="377.2129,-77.0737 380.9816,-67.1718 371.8606,-72.5622 377.2129,-77.0737"/></g><g id="edge2" class="edge"><title>VMnet0&#45;&gt;OpenwrtA</title><path fill="none" stroke="#0000ff" d="M298.9748,-127.8059C296.4281,-115.0907 293.3866,-99.9052 290.5319,-85.6525"/><polygon fill="#0000ff" stroke="#0000ff" points="293.8918,-84.6058 288.496,-75.4879 287.0282,-85.9806 293.8918,-84.6058"/></g><g id="edge3" class="edge"><title>VMnet0&#45;&gt;OpenwrtB</title><path fill="none" stroke="#0000ff" d="M362.8378,-130.1377C394.7811,-114.6978 434.9398,-94.6381 469.9074,-75.2 470.0977,-75.0942 470.2882,-74.9881 470.479,-74.8817"/><polygon fill="#0000ff" stroke="#0000ff" points="472.227,-77.9141 479.1819,-69.9216 468.7608,-71.8325 472.227,-77.9141"/></g><g id="node8" class="node"><title>VMnet1</title><polygon fill="none" stroke="#000000" points="85.1081,-128.1545 89.8756,-128.3152 94.5938,-128.5557 99.2434,-128.8753 103.8056,-129.2731 108.2621,-129.7482 112.5953,-130.2991 116.7884,-130.9243 120.8254,-131.6222 124.6914,-132.3908 128.3723,-133.228 131.8554,-134.1315 135.1291,-135.0989 138.1831,-136.1275 141.0082,-137.2145 143.5967,-138.3568 145.9423,-139.5515 148.0398,-140.7951 149.8856,-142.0843 151.4774,-143.4155 152.814,-144.7852 153.8959,-146.1895 154.7244,-147.6246 155.3023,-149.0866 155.6333,-150.5714 155.7224,-152.075 155.5753,-153.5933 155.1989,-155.122 154.6006,-156.6571 153.7889,-158.1943 152.7724,-159.7294 151.5607,-161.2582 150.1637,-162.7765 148.5914,-164.2801 146.8543,-165.7649 144.9629,-167.2269 142.9279,-168.662 140.7596,-170.0663 138.4687,-171.4359 136.0651,-172.7672 133.5589,-174.0564 130.9597,-175.3 128.2766,-176.4946 125.5183,-177.637 122.6932,-178.7239 119.809,-179.7525 116.8728,-180.7199 113.8914,-181.6235 110.8709,-182.4607 107.8167,-183.2293 104.734,-183.9272 101.6273,-184.5524 98.5007,-185.1033 95.3576,-185.5783 92.2015,-185.9762 89.0351,-186.2958 85.861,-186.5362 82.6817,-186.6969 79.4992,-186.7774 76.3157,-186.7774 73.1332,-186.6969 69.9538,-186.5362 66.7797,-186.2958 63.6133,-185.9762 60.4572,-185.5783 57.3142,-185.1033 54.1875,-184.5524 51.0808,-183.9272 47.9981,-183.2293 44.944,-182.4607 41.9234,-181.6235 38.942,-180.7199 36.0059,-179.7525 33.1216,-178.7239 30.2965,-177.637 27.5383,-176.4946 24.8552,-175.3 22.2559,-174.0564 19.7497,-172.7672 17.3462,-171.4359 15.0552,-170.0663 12.887,-168.662 10.8519,-167.2269 8.9605,-165.7649 7.2234,-164.2801 5.6512,-162.7765 4.2541,-161.2582 3.0424,-159.7294 2.026,-158.1943 1.2142,-156.6571 .6159,-155.122 .2395,-153.5933 .0925,-152.075 .1815,-150.5714 .5126,-149.0866 1.0904,-147.6246 1.9189,-146.1895 3.0008,-144.7852 4.3375,-143.4155 5.9292,-142.0843 7.775,-140.7951 9.8726,-139.5515 12.2181,-138.3568 14.8066,-137.2145 17.6318,-136.1275 20.6857,-135.0989 23.9594,-134.1315 27.4425,-133.228 31.1235,-132.3908 34.9894,-131.6222 39.0264,-130.9243 43.2195,-130.2991 47.5527,-129.7482 52.0092,-129.2731 56.5714,-128.8753 61.221,-128.5557 65.9392,-128.3152 70.7067,-128.1545 75.5039,-128.0741 80.311,-128.0741 85.1081,-128.1545"/><text text-anchor="middle" x="77.9074" y="-161.6257" font-family="Times,serif" font-size="14.00" fill="#000000">Vmware NAT1</text><text text-anchor="middle" x="77.9074" y="-144.8257" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.1.0/24</text></g><g id="edge4" class="edge"><title>VMnet1&#45;&gt;OpenwrtA</title><path fill="none" stroke="#000000" d="M121.456,-131.7201C150.3144,-114.6857 188.572,-92.1033 220.379,-73.3284"/><polygon fill="#000000" stroke="#000000" points="222.3334,-76.239 229.1659,-68.1417 218.7751,-70.2109 222.3334,-76.239"/></g><g id="edge5" class="edge"><title>VMnet1&#45;&gt;NodeA</title><path fill="none" stroke="#000000" d="M77.9074,-127.8059C77.9074,-109.7304 77.9074,-86.6629 77.9074,-68.3796"/><polygon fill="#000000" stroke="#000000" points="81.4075,-68.2414 77.9074,-58.2414 74.4075,-68.2414 81.4075,-68.2414"/></g><g id="node9" class="node"><title>VMnet2</title><polygon fill="none" stroke="#000000" points="942.1081,-128.1545 946.8756,-128.3152 951.5938,-128.5557 956.2434,-128.8753 960.8056,-129.2731 965.2621,-129.7482 969.5953,-130.2991 973.7884,-130.9243 977.8254,-131.6222 981.6914,-132.3908 985.3723,-133.228 988.8554,-134.1315 992.1291,-135.0989 995.1831,-136.1275 998.0082,-137.2145 1000.5967,-138.3568 1002.9423,-139.5515 1005.0398,-140.7951 1006.8856,-142.0843 1008.4774,-143.4155 1009.814,-144.7852 1010.8959,-146.1895 1011.7244,-147.6246 1012.3023,-149.0866 1012.6333,-150.5714 1012.7224,-152.075 1012.5753,-153.5933 1012.1989,-155.122 1011.6006,-156.6571 1010.7889,-158.1943 1009.7724,-159.7294 1008.5607,-161.2582 1007.1637,-162.7765 1005.5914,-164.2801 1003.8543,-165.7649 1001.9629,-167.2269 999.9279,-168.662 997.7596,-170.0663 995.4687,-171.4359 993.0651,-172.7672 990.5589,-174.0564 987.9597,-175.3 985.2766,-176.4946 982.5183,-177.637 979.6932,-178.7239 976.809,-179.7525 973.8728,-180.7199 970.8914,-181.6235 967.8709,-182.4607 964.8167,-183.2293 961.734,-183.9272 958.6273,-184.5524 955.5007,-185.1033 952.3576,-185.5783 949.2015,-185.9762 946.0351,-186.2958 942.861,-186.5362 939.6817,-186.6969 936.4992,-186.7774 933.3157,-186.7774 930.1332,-186.6969 926.9538,-186.5362 923.7797,-186.2958 920.6133,-185.9762 917.4572,-185.5783 914.3142,-185.1033 911.1875,-184.5524 908.0808,-183.9272 904.9981,-183.2293 901.944,-182.4607 898.9234,-181.6235 895.942,-180.7199 893.0059,-179.7525 890.1216,-178.7239 887.2965,-177.637 884.5383,-176.4946 881.8552,-175.3 879.2559,-174.0564 876.7497,-172.7672 874.3462,-171.4359 872.0552,-170.0663 869.887,-168.662 867.8519,-167.2269 865.9605,-165.7649 864.2234,-164.2801 862.6512,-162.7765 861.2541,-161.2582 860.0424,-159.7294 859.026,-158.1943 858.2142,-156.6571 857.6159,-155.122 857.2395,-153.5933 857.0925,-152.075 857.1815,-150.5714 857.5126,-149.0866 858.0904,-147.6246 858.9189,-146.1895 860.0008,-144.7852 861.3375,-143.4155 862.9292,-142.0843 864.775,-140.7951 866.8726,-139.5515 869.2181,-138.3568 871.8066,-137.2145 874.6318,-136.1275 877.6857,-135.0989 880.9594,-134.1315 884.4425,-133.228 888.1235,-132.3908 891.9894,-131.6222 896.0264,-130.9243 900.2195,-130.2991 904.5527,-129.7482 909.0092,-129.2731 913.5714,-128.8753 918.221,-128.5557 922.9392,-128.3152 927.7067,-128.1545 932.5039,-128.0741 937.311,-128.0741 942.1081,-128.1545"/><text text-anchor="middle" x="934.9074" y="-161.6257" font-family="Times,serif" font-size="14.00" fill="#000000">Vmware NAT2</text><text text-anchor="middle" x="934.9074" y="-144.8257" font-family="Times,serif" font-size="14.00" fill="#000000">100.64.2.0/24</text></g><g id="edge6" class="edge"><title>VMnet2&#45;&gt;OpenwrtB</title><path fill="none" stroke="#000000" d="M874.2843,-136.1398C865.4755,-133.275 856.4866,-130.4749 847.9074,-128 751.2927,-100.1294 723.891,-105.1723 627.9074,-75.2 616.1403,-71.5255 603.7526,-67.1377 591.9117,-62.678"/><polygon fill="#000000" stroke="#000000" points="593.1455,-59.4026 582.5551,-59.0982 590.6442,-65.9405 593.1455,-59.4026"/></g><g id="edge7" class="edge"><title>VMnet2&#45;&gt;NodeB</title><path fill="none" stroke="#000000" d="M934.9074,-127.8059C934.9074,-109.7304 934.9074,-86.6629 934.9074,-68.3796"/><polygon fill="#000000" stroke="#000000" points="938.4075,-68.2414 934.9074,-58.2414 931.4075,-68.2414 938.4075,-68.2414"/></g><g id="node10" class="node"><title>VMnet3</title><polygon fill="none" stroke="#ffa500" points="736.3712,-128.1545 743.2991,-128.3152 750.1554,-128.5557 756.912,-128.8753 763.5416,-129.2731 770.0176,-129.7482 776.3144,-130.2991 782.4077,-130.9243 788.2741,-131.6222 793.8919,-132.3908 799.2409,-133.228 804.3024,-134.1315 809.0596,-135.0989 813.4975,-136.1275 817.6028,-137.2145 821.3644,-138.3568 824.7728,-139.5515 827.8209,-140.7951 830.5031,-142.0843 832.8162,-143.4155 834.7586,-144.7852 836.3307,-146.1895 837.5346,-147.6246 838.3744,-149.0866 838.8554,-150.5714 838.9848,-152.075 838.7712,-153.5933 838.2241,-155.122 837.3548,-156.6571 836.1751,-158.1943 834.6981,-159.7294 832.9373,-161.2582 830.9072,-162.7765 828.6224,-164.2801 826.0982,-165.7649 823.3497,-167.2269 820.3924,-168.662 817.2416,-170.0663 813.9125,-171.4359 810.4197,-172.7672 806.7778,-174.0564 803.0007,-175.3 799.1018,-176.4946 795.0936,-177.637 790.9883,-178.7239 786.797,-179.7525 782.5303,-180.7199 778.1979,-181.6235 773.8085,-182.4607 769.3703,-183.2293 764.8907,-183.9272 760.3762,-184.5524 755.8326,-185.1033 751.2653,-185.5783 746.679,-185.9762 742.0777,-186.2958 737.4653,-186.5362 732.8452,-186.6969 728.2205,-186.7774 723.5943,-186.7774 718.9697,-186.6969 714.3496,-186.5362 709.7371,-186.2958 705.1359,-185.9762 700.5495,-185.5783 695.9822,-185.1033 691.4387,-184.5524 686.9241,-183.9272 682.4445,-183.2293 678.0063,-182.4607 673.617,-181.6235 669.2845,-180.7199 665.0178,-179.7525 660.8266,-178.7239 656.7212,-177.637 652.7131,-176.4946 648.8141,-175.3 645.037,-174.0564 641.3951,-172.7672 637.9024,-171.4359 634.5732,-170.0663 631.4224,-168.662 628.4651,-167.2269 625.7167,-165.7649 623.1924,-164.2801 620.9076,-162.7765 618.8775,-161.2582 617.1167,-159.7294 615.6397,-158.1943 614.46,-156.6571 613.5907,-155.122 613.0437,-153.5933 612.83,-152.075 612.9594,-150.5714 613.4405,-149.0866 614.2802,-147.6246 615.4842,-146.1895 617.0562,-144.7852 618.9986,-143.4155 621.3117,-142.0843 623.994,-140.7951 627.042,-139.5515 630.4505,-138.3568 634.212,-137.2145 638.3174,-136.1275 642.7552,-135.0989 647.5124,-134.1315 652.574,-133.228 657.923,-132.3908 663.5408,-131.6222 669.4072,-130.9243 675.5004,-130.2991 681.7972,-129.7482 688.2733,-129.2731 694.9029,-128.8753 701.6595,-128.5557 708.5157,-128.3152 715.4436,-128.1545 722.4147,-128.0741 729.4002,-128.0741 736.3712,-128.1545"/><text text-anchor="middle" x="725.9074" y="-161.6257" font-family="Times,serif" font-size="14.00" fill="#ffa500">Vmware NAT3(DHCP)</text><text text-anchor="middle" x="725.9074" y="-144.8257" font-family="Times,serif" font-size="14.00" fill="#ffa500">192.168.31.0/24</text></g><g id="edge8" class="edge"><title>VMnet3&#45;&gt;UbuntuC</title><path fill="none" stroke="#ffa500" d="M715.8777,-128.1131C710.5666,-112.5909 703.9738,-93.3229 698.2378,-76.5591"/><polygon fill="#ffa500" stroke="#ffa500" points="701.5247,-75.3537 694.9757,-67.0253 694.9016,-77.6199 701.5247,-75.3537"/></g><g id="node11" class="node"><title>WG</title><polygon fill="none" stroke="#ff0000" points="531.399,-128.1545 535.6969,-128.3152 539.9504,-128.5557 544.1421,-128.8753 548.255,-129.2731 552.2726,-129.7482 556.179,-130.2991 559.9591,-130.9243 563.5986,-131.6222 567.0837,-132.3908 570.4021,-133.228 573.5422,-134.1315 576.4935,-135.0989 579.2467,-136.1275 581.7936,-137.2145 584.1272,-138.3568 586.2417,-139.5515 588.1327,-140.7951 589.7967,-142.0843 591.2317,-143.4155 592.4367,-144.7852 593.412,-146.1895 594.1589,-147.6246 594.6799,-149.0866 594.9783,-150.5714 595.0586,-152.075 594.926,-153.5933 594.5867,-155.122 594.0473,-156.6571 593.3155,-158.1943 592.3992,-159.7294 591.3068,-161.2582 590.0474,-162.7765 588.6299,-164.2801 587.0639,-165.7649 585.3588,-167.2269 583.5242,-168.662 581.5695,-170.0663 579.5042,-171.4359 577.3373,-172.7672 575.078,-174.0564 572.7347,-175.3 570.3159,-176.4946 567.8293,-177.637 565.2824,-178.7239 562.6822,-179.7525 560.0352,-180.7199 557.3475,-181.6235 554.6244,-182.4607 551.871,-183.2293 549.0919,-183.9272 546.2912,-184.5524 543.4725,-185.1033 540.639,-185.5783 537.7937,-185.9762 534.9392,-186.2958 532.0777,-186.5362 529.2115,-186.6969 526.3424,-186.7774 523.4724,-186.7774 520.6034,-186.6969 517.7371,-186.5362 514.8757,-186.2958 512.0211,-185.9762 509.1758,-185.5783 506.3424,-185.1033 503.5236,-184.5524 500.7229,-183.9272 497.9438,-183.2293 495.1905,-182.4607 492.4674,-181.6235 489.7796,-180.7199 487.1326,-179.7525 484.5324,-178.7239 481.9856,-177.637 479.499,-176.4946 477.0801,-175.3 474.7369,-174.0564 472.4775,-172.7672 470.3107,-171.4359 468.2453,-170.0663 466.2906,-168.662 464.456,-167.2269 462.7509,-165.7649 461.1849,-164.2801 459.7675,-162.7765 458.508,-161.2582 457.4157,-159.7294 456.4993,-158.1943 455.7675,-156.6571 455.2282,-155.122 454.8888,-153.5933 454.7562,-152.075 454.8365,-150.5714 455.135,-149.0866 455.6559,-147.6246 456.4028,-146.1895 457.3781,-144.7852 458.5832,-143.4155 460.0182,-142.0843 461.6822,-140.7951 463.5731,-139.5515 465.6877,-138.3568 468.0213,-137.2145 470.5681,-136.1275 473.3213,-135.0989 476.2726,-134.1315 479.4127,-133.228 482.7311,-132.3908 486.2163,-131.6222 489.8557,-130.9243 493.6358,-130.2991 497.5423,-129.7482 501.5599,-129.2731 505.6728,-128.8753 509.8644,-128.5557 514.1179,-128.3152 518.4159,-128.1545 522.7406,-128.0741 527.0743,-128.0741 531.399,-128.1545"/><text text-anchor="middle" x="524.9074" y="-161.6257" font-family="Times,serif" font-size="14.00" fill="#ff0000">WG NAT</text><text text-anchor="middle" x="524.9074" y="-144.8257" font-family="Times,serif" font-size="14.00" fill="#ff0000">100.64.0.0/24</text></g><g id="edge9" class="edge"><title>WG&#45;&gt;Master</title><path fill="none" stroke="#ff0000" d="M497.3073,-129.6341C480.9663,-113.1797 460.0677,-92.136 442.3795,-74.3252"/><polygon fill="#ff0000" stroke="#ff0000" points="444.5481,-71.5419 435.0181,-66.9127 439.5813,-76.4745 444.5481,-71.5419"/><text text-anchor="middle" x="495.1739" y="-97.4" font-family="Times,serif" font-size="14.00" fill="#ff0000">Server</text></g><g id="edge10" class="edge"><title>WG&#45;&gt;OpenwrtA</title><path fill="none" stroke="#ff0000" d="M471.5795,-135.6371C434.599,-120.004 384.5318,-97.7898 341.9074,-75.2 341.7151,-75.0981 341.5225,-74.9957 341.3297,-74.8931"/><polygon fill="#ff0000" stroke="#ff0000" points="343.0028,-71.8189 332.5537,-70.0674 339.6299,-77.9527 343.0028,-71.8189"/></g><g id="edge11" class="edge"><title>WG&#45;&gt;OpenwrtB</title><path fill="none" stroke="#ff0000" d="M526.3906,-127.8059C527.0273,-115.0907 527.7876,-99.9052 528.5013,-85.6525"/><polygon fill="#ff0000" stroke="#ff0000" points="532.0057,-85.6505 529.0103,-75.4879 525.0145,-85.3003 532.0057,-85.6505"/></g><g id="edge12" class="edge"><title>WG&#45;&gt;UbuntuC</title><path fill="none" stroke="#ff0000" d="M560.4166,-130.8325C583.1631,-113.7974 612.9459,-91.4927 637.6773,-72.9711"/><polygon fill="#ff0000" stroke="#ff0000" points="639.9472,-75.6439 645.8534,-66.848 635.7511,-70.041 639.9472,-75.6439"/></g></g></svg><div style="text-align:center;margin:-8px 0 10px;color:#858585"></div></div></div><h1 id="构建测试环境"><a href="#构建测试环境" class="headerlink" title="构建测试环境"></a>构建测试环境</h1><p>Master 和 Ubuntu 两台主机，可以按照之前教程进行配置。Openwrt 需要安装 <code>wireguard-tools</code><br>使用VMware 的虚拟网络进行组网</p><h2 id="配置-Openwrt-LAN"><a href="#配置-Openwrt-LAN" class="headerlink" title="配置 Openwrt LAN"></a>配置 Openwrt LAN</h2><p>分配给 Openwrt A&#x2F;B 分别是 <code>100.64.1.0/24</code>, <code>100.64.2.0/24</code> 需要通过修改 接口LAN 相关配置</p><h2 id="配置-Wireguard"><a href="#配置-Wireguard" class="headerlink" title="配置 Wireguard"></a>配置 Wireguard</h2><p>生成相应密钥对</p><h3 id="Master"><a href="#Master" class="headerlink" title="Master"></a>Master</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">PrivateKey = ELjtwIswOI/qSV6oDkRbOdaZt+CuLWSWu3rY1Wh0XUU=</span><br><span class="line"></span><br><span class="line">Address = 100.64.0.1/24</span><br><span class="line">SaveConfig = true</span><br><span class="line"></span><br><span class="line">PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE; ip6tables -A FORWARD -i %i -j ACCEPT; ip6tables -A FORWARD -o %i -j ACCEPT; ip6tables -t nat -A POSTROUTING -o ens33 -j MASQUERADE</span><br><span class="line">PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o ens33 -j MASQUERADE; ip6tables -D FORWARD -i %i -j ACCEPT; ip6tables -D FORWARD -o %i -j ACCEPT; ip6tables -t nat -D POSTROUTING -o ens33 -j MASQUERADE</span><br><span class="line"></span><br><span class="line">ListenPort = 65535</span><br><span class="line"></span><br><span class="line">[Peer]</span><br><span class="line">PublicKey = YUMWodweSGW3S8kY45xOeCZHX0LwNUekDTs7fYM09T0=</span><br><span class="line">AllowedIPs = 100.64.0.2/32</span><br><span class="line">[Peer]</span><br><span class="line">PublicKey = Nn4Z/TSRHrbtp2z0YC09S88Lm0MBtiZeTlAhtZ4AJwI=</span><br><span class="line">AllowedIPs = 100.64.0.3/32</span><br><span class="line">[Peer]</span><br><span class="line">PublicKey = 2g83ZgKl56O/swhR6vHaiMg5TBiKhkN5R71qEsbpNhA=</span><br><span class="line">AllowedIPs = 100.64.0.4/32</span><br></pre></td></tr></table></figure><h3 id="Openwrt-A"><a href="#Openwrt-A" class="headerlink" title="Openwrt A"></a>Openwrt A</h3><p>在 <code>/etc/config/network</code> 最后添加配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">config interface &#x27;link_main&#x27;</span><br><span class="line">        option proto &#x27;wireguard&#x27;</span><br><span class="line">        option private_key &#x27;gNAl0GGk6zJr6IVJjaDAdJvgOAWRss2m3fLL6PCpl38=&#x27;</span><br><span class="line">        list addresses &#x27;100.64.0.2/32&#x27;</span><br><span class="line"></span><br><span class="line">config wireguard_link_main &#x27;main&#x27;</span><br><span class="line">        option public_key &#x27;/8LTHNe886/h8IxhjMdbXJyYHlSQQAuIFXtZtRBdGH0=&#x27;</span><br><span class="line">        option endpoint_host &#x27;192.168.234.128&#x27;</span><br><span class="line">        option endpoint_port &#x27;65535&#x27;</span><br><span class="line">        option persistent_keepalive &#x27;25&#x27;</span><br><span class="line">        option route_allowed_ips &#x27;1&#x27;</span><br><span class="line">        list allowed_ips &#x27;100.64.0.0/24&#x27;</span><br></pre></td></tr></table></figure><p>重启网络</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/network restart</span><br></pre></td></tr></table></figure><h3 id="Openwrt-B"><a href="#Openwrt-B" class="headerlink" title="Openwrt B"></a>Openwrt B</h3><p>同上操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">config interface &#x27;link_main&#x27;</span><br><span class="line">        option proto &#x27;wireguard&#x27;</span><br><span class="line">        option private_key &#x27;8PGe5bj8/1+t632qIVrXH4qqRH1tuKvvlTKCdymyWW8=&#x27;</span><br><span class="line">        list addresses &#x27;100.64.0.3/32&#x27;</span><br><span class="line"></span><br><span class="line">config wireguard_link_main &#x27;main&#x27;</span><br><span class="line">        option public_key &#x27;/8LTHNe886/h8IxhjMdbXJyYHlSQQAuIFXtZtRBdGH0=&#x27;</span><br><span class="line">        option endpoint_host &#x27;192.168.234.128&#x27;</span><br><span class="line">        option endpoint_port &#x27;65535&#x27;</span><br><span class="line">        option persistent_keepalive &#x27;25&#x27;</span><br><span class="line">        option route_allowed_ips &#x27;1&#x27;</span><br><span class="line">        list allowed_ips &#x27;100.64.0.0/24&#x27;</span><br></pre></td></tr></table></figure><h1 id="网络互通"><a href="#网络互通" class="headerlink" title="网络互通"></a>网络互通</h1><h2 id="Openwrt-间"><a href="#Openwrt-间" class="headerlink" title="Openwrt 间"></a>Openwrt 间</h2></div><div class="article-licensing box"><div class="licensing-title"><p>Wireguard 组网</p><p><a href="https://blog.kur4ge.com/2023/01/wireguard-network-link/">https://blog.kur4ge.com/2023/01/wireguard-network-link/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Kur4ge</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-01-27</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-01-27</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/WireGuard/">WireGuard</a><a class="link-muted mr-2" rel="tag" href="/tags/Network/">Network</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6173ea868afacc001dd07610&amp;product=inline-share-buttons" defer></script></article></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/07/flexget-plex-and-bangumi/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">我的自动化番剧工作流</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/02/wireguard-tutorial/"><span class="level-item">WireGuard 简易上手</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config=function(){this.page.url="https://blog.kur4ge.com/2023/01/wireguard-network-link/",this.page.identifier="2023/01/wireguard-network-link/"};!function(){var e=document,t=e.createElement("script");t.src="//kur4ge.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://kur4ge.oss-accelerate.aliyuncs.com/img/avatar.png?no-lazy" alt="Kur4ge"></figure><p class="title is-size-4 is-block" style="line-height:inherit">Kur4ge</p><p class="is-size-6 is-block">Security researcher</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://twitter.com/kur4ge1337" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/kur4ge"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/kur4ge1337"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#构建测试环境"><span class="level-left"><span class="level-item">1</span><span class="level-item">构建测试环境</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#配置-Openwrt-LAN"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">配置 Openwrt LAN</span></span></a></li><li><a class="level is-mobile" href="#配置-Wireguard"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">配置 Wireguard</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Master"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">Master</span></span></a></li><li><a class="level is-mobile" href="#Openwrt-A"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">Openwrt A</span></span></a></li><li><a class="level is-mobile" href="#Openwrt-B"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">Openwrt B</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#网络互通"><span class="level-left"><span class="level-item">2</span><span class="level-item">网络互通</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Openwrt-间"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Openwrt 间</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="https://kur4ge.oss-accelerate.aliyuncs.com/js/toc.js" defer></script></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/CTF/"><span class="level-start"><span class="level-item">CTF</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B0%9D%E5%B0%9D%E9%B2%9C/"><span class="level-start"><span class="level-item">尝尝鲜</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%A0%B4%E4%BA%8B%E6%B0%B4/"><span class="level-start"><span class="level-item">破事水</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2023-07-15T22:53:49.000Z">2023-07-16</time></p><p class="title"><a href="/2023/07/flexget-plex-and-bangumi/">我的自动化番剧工作流</a></p><p class="categories"><a href="/categories/%E5%B0%9D%E5%B0%9D%E9%B2%9C/">尝尝鲜</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2023-01-27T06:18:47.000Z">2023-01-27</time></p><p class="title"><a href="/2023/01/wireguard-network-link/">Wireguard 组网</a></p><p class="categories"><a href="/categories/%E5%B0%9D%E5%B0%9D%E9%B2%9C/">尝尝鲜</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-02-10T23:46:00.000Z">2022-02-11</time></p><p class="title"><a href="/2022/02/wireguard-tutorial/">WireGuard 简易上手</a></p><p class="categories"><a href="/categories/%E5%B0%9D%E5%B0%9D%E9%B2%9C/">尝尝鲜</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-12-13T21:37:32.000Z">2021-12-14</time></p><p class="title"><a href="/2021/12/A-ginx-idea-and-writeup/">A-ginx 出题思路与题解</a></p><p class="categories"><a href="/categories/CTF/">CTF</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-11-06T14:03:58.000Z">2021-11-06</time></p><p class="title"><a href="/2021/11/Why-is-Baidu-so-slow/">为什么我的百度访问这么慢？？？</a></p><p class="categories"><a href="/categories/%E7%A0%B4%E4%BA%8B%E6%B0%B4/">破事水</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">七月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">一月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">十一月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Chromium/"><span class="tag">Chromium</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DNS/"><span class="tag">DNS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Network/"><span class="tag">Network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WireGuard/"><span class="tag">WireGuard</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bangumi/"><span class="tag">bangumi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flexget/"><span class="tag">flexget</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/homelab/"><span class="tag">homelab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plex/"><span class="tag">plex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tutorial/"><span class="tag">tutorial</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://kur4ge.oss-accelerate.aliyuncs.com/img/logo.png?no-lazy" alt="Kur4ge&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Kur4ge</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="https://kur4ge.oss-accelerate.aliyuncs.com/js/column.js"></script><script src="https://kur4ge.oss-accelerate.aliyuncs.com/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="https://kur4ge.oss-accelerate.aliyuncs.com/js/back_to_top.js" defer></script><script src="https://s9.cnzz.com/z_stat.php?id=1280699896&amp;web_id=1280699896" async></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load",()=>{window.cookieconsent.initialise({type:"info",theme:"edgeless",static:!1,position:"bottom-left",content:{message:"此网站使用Cookie来改善您的体验。",dismiss:"知道了！",allow:"允许使用Cookie",deny:"拒绝",link:"了解更多",policy:"Cookie政策",href:"https://www.cookiesandyou.com/"},palette:{popup:{background:"#edeff5",text:"#838391"},button:{background:"#4b81e8"}}})})</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load",()=>{"function"==typeof $.fn.lightGallery&&$(".article").lightGallery({selector:".gallery-item"}),"function"==typeof $.fn.justifiedGallery&&($(".justified-gallery > p > .gallery-item").length&&$(".justified-gallery > p > .gallery-item").unwrap(),$(".justified-gallery").justifiedGallery())})</script><script src="https://kur4ge.oss-accelerate.aliyuncs.com/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="https://kur4ge.oss-accelerate.aliyuncs.com/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",(function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})}))</script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>